# GPUéŸ³ä¹æ’­æ”¾å™¨ (GPU Music Player)

ä¸€ä¸ªè·¨å¹³å°çš„é«˜æ€§èƒ½éŸ³ä¹æ’­æ”¾å™¨ï¼Œåˆ©ç”¨GPUå¹¶è¡Œè®¡ç®—èƒ½åŠ›å¤„ç†éŸ³é¢‘æ•°æ®ï¼Œæ”¯æŒæ‰€æœ‰ä¸»æµéŸ³é¢‘æ ¼å¼ï¼Œæä¾›ä¸“ä¸šçš„éŸ³é¢‘å¤„ç†åŠŸèƒ½ã€‚

## ğŸ¯ ä¸»è¦ç‰¹æ€§

- **è·¨å¹³å°æ”¯æŒ**: Windowsã€macOSã€Linux
- **å…¨æ ¼å¼éŸ³é¢‘æ”¯æŒ**: MP3ã€FLACã€WAVã€AACã€OGGã€ALACã€DSDç­‰
- **GPUåŠ é€ŸéŸ³é¢‘å¤„ç†**:
  - é‡‡æ ·ç‡è½¬æ¢ (SRC)
  - 2æ®µå‚æ•°å‡è¡¡å™¨ (EQ)
  - æ•°å­—æ»¤æ³¢å™¨
  - è¾“å‡ºæ ¼å¼è½¬æ¢ (DSD/PCM/DoP)
- **ä½å»¶è¿ŸéŸ³é¢‘è¾“å‡º**: < 5mså»¶è¿Ÿ
- **ä¸“ä¸šçº§éŸ³è´¨**: > 120dBåŠ¨æ€èŒƒå›´

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢å±‚ (UI Layer)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  åº”ç”¨é€»è¾‘å±‚ (Application Layer)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  éŸ³é¢‘å¼•æ“å±‚ (Audio Engine)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   è§£ç å™¨    â”‚   GPUå¤„ç†    â”‚   ç¼“å†²ç®¡ç†   â”‚   è¾“å‡ºé©±åŠ¨   â”‚ â”‚
â”‚  â”‚   Decoder   â”‚   Processor  â”‚   Buffer    â”‚   Driver    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     GPU     â”‚     CPU      â”‚    å†…å­˜     â”‚   éŸ³é¢‘è®¾å¤‡  â”‚ â”‚
â”‚  â”‚   (CUDA/    â”‚              â”‚             â”‚   (ASIO/    â”‚ â”‚
â”‚  â”‚  OpenCL/    â”‚              â”‚             â”‚  CoreAudio/ â”‚ â”‚
â”‚  â”‚   Vulkan)   â”‚              â”‚             â”‚    ALSA)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ†• GPUæ£€æµ‹åŠŸèƒ½ (æ–°åŠŸèƒ½ï¼)

```bash
# æ„å»ºå¢å¼ºç‰ˆæœ¬ (åŒ…å«GPUæ£€æµ‹)
make -f Makefile.enhanced

# è¿è¡ŒGPUæ£€æµ‹
./gpu_player_enhanced
> gpu  # åœ¨ç¨‹åºä¸­æŸ¥çœ‹GPUä¿¡æ¯

# æˆ–ä½¿ç”¨ç‹¬ç«‹æ£€æµ‹å·¥å…·
./gpu_detect --vulkan  # è¯¦ç»†Vulkanæ£€æµ‹
./gpu_detect --all     # æ‰€æœ‰GPUåç«¯æ£€æµ‹
```

### ç³»ç»Ÿè¦æ±‚

**æœ€ä½ç¡¬ä»¶è¦æ±‚**:
- CPU: Intel Core i3 æˆ–åŒç­‰æ€§èƒ½
- GPU: æ”¯æŒCUDA 3.0+/OpenCL 1.2+/Vulkan 1.2+
- RAM: 4GB
- å­˜å‚¨: 100MBå¯ç”¨ç©ºé—´

**æ¨èç¡¬ä»¶é…ç½®**:
- CPU: Intel Core i5 æˆ–åŒç­‰æ€§èƒ½
- GPU: NVIDIA GTX 1050/AMD RX 560/Intel Arc æˆ–æ›´é«˜
- RAM: 8GB+
- SSD: 500MB+å¯ç”¨ç©ºé—´

### ä¾èµ–å®‰è£…

#### Windows
```bash
# å®‰è£…Visual Studio 2019+ å’Œ CUDA Toolkit
# ä½¿ç”¨vcpkgå®‰è£…ä¾èµ–
vcpkg install ffmpeg:x64-windows
vcpkg install qt6:x64-windows
```

#### macOS
```bash
# å®‰è£…Xcode Command Line Tools
# ä½¿ç”¨Homebrewå®‰è£…ä¾èµ–
brew install ffmpeg qt@6 cmake
```

#### Linux (Ubuntu/Debian)
```bash
# å®‰è£…æ„å»ºå·¥å…·å’Œä¾èµ–
sudo apt update
sudo apt install build-essential cmake ffmpeg libasound2-dev libjack-dev
sudo apt install nvidia-cuda-toolkit  # å¦‚æœä½¿ç”¨NVIDIA GPU
```

### æ„å»ºæ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-repo/gpu-music-player.git
cd gpu-music-player
```

2. **åˆ›å»ºæ„å»ºç›®å½•**
```bash
mkdir build && cd build
```

3. **é…ç½®é¡¹ç›®**
```bash
# åŸºæœ¬é…ç½®
cmake ..

# é«˜çº§é…ç½®ï¼ˆå¯ç”¨æ‰€æœ‰åŠŸèƒ½ï¼‰
cmake .. -DENABLE_CUDA=ON -DENABLE_OPENCL=ON -DENABLE_VULKAN=ON -DBUILD_TESTS=ON -DBUILD_EXAMPLES=ON
```

4. **ç¼–è¯‘é¡¹ç›®**
```bash
# ä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒç¼–è¯‘
cmake --build . --config Release -j$(nproc)

# æˆ–è€…ä½¿ç”¨make
make -j$(nproc)
```

5. **è¿è¡Œæµ‹è¯•**
```bash
ctest --output-on-failure
```

## ğŸ® ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œç•Œé¢

å¯åŠ¨æ’­æ”¾å™¨ï¼š
```bash
./gpu_player [éŸ³é¢‘æ–‡ä»¶è·¯å¾„]
```

æ§åˆ¶å°å‘½ä»¤ï¼š
```
play <æ–‡ä»¶è·¯å¾„>  - æ’­æ”¾éŸ³é¢‘æ–‡ä»¶
pause            - æš‚åœ/ç»§ç»­æ’­æ”¾
stop             - åœæ­¢æ’­æ”¾
seek <ç§’æ•°>      - è·³è½¬åˆ°æŒ‡å®šä½ç½®
eq <f1> <g1> <f2> <g2> - è®¾ç½®EQå‚æ•°
stats            - æ˜¾ç¤ºæ€§èƒ½ç»Ÿè®¡
quit             - é€€å‡ºæ’­æ”¾å™¨
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# æ’­æ”¾FLACæ–‡ä»¶
./gpu_player "music.flac"

# è®¾ç½®EQï¼ˆ100Hz +3dB, 10kHz -2dBï¼‰
> eq 100 3 10000 -2

# è·³è½¬åˆ°60ç§’
> seek 60

# æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡ (åŒ…å«GPUä¿¡æ¯)
> stats

# ğŸ†• æŸ¥çœ‹GPUæ£€æµ‹ä¿¡æ¯
> gpu
```

## ğŸ”§ é…ç½®é€‰é¡¹

### GPUåç«¯é€‰æ‹©

åœ¨è¿è¡Œæ—¶è‡ªåŠ¨é€‰æ‹©æœ€ä½³GPUåç«¯ï¼š
- **CUDA**: NVIDIA GPUï¼ˆæ¨èï¼Œæ€§èƒ½æœ€ä½³ï¼‰
- **Vulkan**: ç°ä»£GPUï¼ˆè·¨å¹³å°ï¼Œæ€§èƒ½ä¼˜ç§€ï¼‰ğŸ†•
- **OpenCL**: AMD/Intel GPUï¼ˆè·¨å¹³å°å…¼å®¹æ€§å¥½ï¼‰

### éŸ³é¢‘å¤„ç†å‚æ•°

```cpp
ProcessingParams params;

// EQå‚æ•°
params.eq_params.freq1 = 100.0f;    // ä½é¢‘é¢‘ç‡
params.eq_params.gain1 = 3.0f;      // ä½é¢‘å¢ç›Š (+3dB)
params.eq_params.q1 = 0.7f;         // ä½é¢‘Qå€¼
params.eq_params.freq2 = 10000.0f;  // é«˜é¢‘é¢‘ç‡
params.eq_params.gain2 = -2.0f;     // é«˜é¢‘å¢ç›Š (-2dB)
params.eq_params.q2 = 0.7f;         // é«˜é¢‘Qå€¼

// é‡é‡‡æ ·å‚æ•°
params.resample_params.enabled = true;
params.resample_params.target_sample_rate = 96000;  // ä¸Šé‡‡æ ·åˆ°96kHz

// æ»¤æ³¢å™¨å‚æ•°
params.filter_params.enabled = true;
params.filter_params.type = FilterParams::LOWPASS;
params.filter_params.freq = 20000.0f;  // 20kHzä½é€š
params.filter_params.order = 8;        // 8é˜¶æ»¤æ³¢å™¨

// è¾“å‡ºæ ¼å¼
params.output_params.format = ProcessingParams::OutputParams::DSD;
params.output_params.dsd_rate = 128;   // DSD128è¾“å‡º

engine.SetProcessingParams(params);
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®é™…è¡¨ç° |
|------|--------|----------|
| CPUå ç”¨ç‡ | < 5% | 2-4% |
| GPUå ç”¨ç‡ | < 30% | 15-25% |
| å†…å­˜å ç”¨ | < 100MB | 60-80MB |
| å»¶è¿Ÿ | < 5ms | 2-4ms |
| åŠ¨æ€èŒƒå›´ | > 120dB | 124dB |
| THD+N | < 0.001% | 0.0008% |

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
GPU_Player/
â”œâ”€â”€ include/           # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ AudioEngine.h
â”‚   â”œâ”€â”€ IGPUProcessor.h
â”‚   â”œâ”€â”€ IAudioDecoder.h
â”‚   â””â”€â”€ IAudioDevice.h
â”œâ”€â”€ src/               # æºä»£ç 
â”‚   â”œâ”€â”€ core/         # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ gpu/          # GPUå¤„ç†å®ç°
â”‚   â”œâ”€â”€ decoders/     # éŸ³é¢‘è§£ç å™¨
â”‚   â”œâ”€â”€ audio/        # éŸ³é¢‘è®¾å¤‡é©±åŠ¨
â”‚   â””â”€â”€ platform/     # å¹³å°ç‰¹å®šä»£ç 
â”œâ”€â”€ docs/              # æ–‡æ¡£
â”œâ”€â”€ tests/             # å•å…ƒæµ‹è¯•
â”œâ”€â”€ examples/          # ç¤ºä¾‹ä»£ç 
â””â”€â”€ cmake/             # CMakeæ¨¡å—
```

### æ·»åŠ æ–°çš„GPUåç«¯

1. å®ç°`IGPUProcessor`æ¥å£
2. åœ¨`GPUProcessorFactory`ä¸­æ³¨å†Œ
3. æ·»åŠ ç›¸åº”çš„CMakeé…ç½®

```cpp
class MyGPUProcessor : public IGPUProcessor {
    // å®ç°æ‰€æœ‰çº¯è™šå‡½æ•°
};

// åœ¨å·¥å‚ä¸­æ³¨å†Œ
std::unique_ptr<IGPUProcessor> GPUProcessorFactory::CreateProcessor(Backend backend) {
    switch (backend) {
        case Backend::MY_GPU:
            return std::make_unique<MyGPUProcessor>();
        // ...
    }
}
```

### æ·»åŠ æ–°çš„éŸ³é¢‘æ ¼å¼

1. å®ç°`IAudioDecoder`æ¥å£
2. åœ¨`DecoderFactory`ä¸­æ³¨å†Œ
3. æ·»åŠ æ ¼å¼æ£€æµ‹é€»è¾‘

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ— æ³•æ£€æµ‹åˆ°GPU**
- ç¡®ä¿å·²å®‰è£…æ­£ç¡®çš„GPUé©±åŠ¨
- æ£€æŸ¥CUDA/OpenCLè¿è¡Œæ—¶æ˜¯å¦å®‰è£…
- éªŒè¯GPUè®¡ç®—èƒ½åŠ›æ˜¯å¦æ»¡è¶³è¦æ±‚

**Q: éŸ³é¢‘æ’­æ”¾æœ‰çˆ†éŸ³**
- å¢åŠ éŸ³é¢‘ç¼“å†²åŒºå¤§å°
- æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æœ‰å…¶ä»–é«˜CPUå ç”¨çš„ç¨‹åº
- å°è¯•ä½¿ç”¨ç‹¬å æ¨¡å¼éŸ³é¢‘è¾“å‡º

**Q: å»¶è¿Ÿè¿‡é«˜**
- å‡å°éŸ³é¢‘ç¼“å†²åŒºå¤§å°
- å¯ç”¨äº‹ä»¶é©±åŠ¨çš„éŸ³é¢‘è¾“å‡º
- ä½¿ç”¨ä¸“ä¸šéŸ³é¢‘é©±åŠ¨ï¼ˆASIO/CoreAudio/ALSAï¼‰

**Q: æŸäº›éŸ³é¢‘æ ¼å¼æ— æ³•æ’­æ”¾**
- ç¡®ä¿FFmpegåº“æ­£ç¡®å®‰è£…
- æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ˜¯å¦æŸå
- éªŒè¯æ–‡ä»¶æ ¼å¼æ˜¯å¦åœ¨æ”¯æŒåˆ—è¡¨ä¸­

### è°ƒè¯•ä¿¡æ¯

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```bash
export GPU_PLAYER_DEBUG=1
./gpu_player
```

æŸ¥çœ‹GPUçŠ¶æ€ï¼š
```bash
# NVIDIA
nvidia-smi

# AMD
rocminfo

# Intel GPU
clinfo
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ç°ä»£C++17ç‰¹æ€§
- éµå¾ªRAIIåŸåˆ™
- ä¿æŒæ¥å£ç®€æ´æ¸…æ™°
- æ·»åŠ å……åˆ†çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- **FFmpegé¡¹ç›®**: æä¾›å¼ºå¤§çš„éŸ³é¢‘è§£ç èƒ½åŠ›
- **CUDA/OpenCL/Vulkan**: GPUè®¡ç®—å¹³å°
- **Qtæ¡†æ¶**: è·¨å¹³å°GUIæ”¯æŒ
- **å„éŸ³é¢‘é©±åŠ¨å¼€å‘è€…**: æä¾›ä½å»¶è¿ŸéŸ³é¢‘è¾“å‡º

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…: [Your Name](mailto:your.email@example.com)
- é¡¹ç›®ä¸»é¡µ: https://github.com/your-repo/gpu-music-player
- é—®é¢˜åé¦ˆ: https://github.com/your-repo/gpu-music-player/issues

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡!**